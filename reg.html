<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GODX Guild Application</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="body-REG">
  <h1 class="headline">ğ—šğ—¨ğ—œğ—Ÿğ—— ğ—¥ğ—˜ğ—¤ğ—¨ğ—œğ—¥ğ—˜ğ— ğ—˜ğ—¡ğ—§ â€“ ğ—šğ—¢ğ——X ğ—˜ğ—¦ğ—£ğ—¢ğ—¥ğ—§ğ—¦</h1>

  <form id="GuildFORM" method="POST" action="/apply" enctype="multipart/form-data">
    <table border="1">
      <tr>
        <td><label for="name">Name</label></td>
        <td><input id="name" type="text" name="name" required></td>
      </tr>

      <tr>
        <td><label for="discordId">Discord User ID</label></td>
        <td>
          <input id="discordId" type="text" name="discordId" pattern="\d{17,20}" required>
          <small>Enter your numeric Discord ID (17â€“20 digits)</small>
        </td>
      </tr>

      <tr>
        <td><label for="age">Age</label></td>
        <td><input id="age" type="number" name="age" min="10" required></td>
      </tr>

      <tr>
        <td><label for="experience">Experience</label></td>
        <td><textarea id="experience" name="experience" rows="3"></textarea></td>
      </tr>

      <tr>
        <td>Role</td>
        <td>
          <label><input type="checkbox" name="roles" value="Rusher"> Rusher</label><br>
          <label><input type="checkbox" name="roles" value="Sniper"> Sniper</label><br>
          <label><input type="checkbox" name="roles" value="All Rounder"> All Rounder</label>
        </td>
      </tr>

      <tr>
        <td>Device</td>
        <td>
          <label><input type="checkbox" name="devices" value="Mobile"> Mobile</label><br>
          <label><input type="checkbox" name="devices" value="PC"> PC</label>
        </td>
      </tr>

      <tr>
        <td><label for="discord_pic">Profile Image</label></td>
        <td><input id="discord_pic" type="file" name="discord_pic" accept="image/png, image/jpeg"></td>
      </tr>
    </table>

    <br>
    <button type="submit">Submit</button>
  </form>

  <script>
    const form = document.getElementById("GuildFORM");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const fd = new FormData(form);
      const btn = form.querySelector("button[type=submit]");
      btn.disabled = true;
      btn.textContent = "Submitting...";

      try {
        const res = await fetch("/apply", { method: "POST", body: fd });
        const data = await res.json();

        if (data.success) {
          alert("âœ… Application Submitted!");
          form.reset();
        } else {
          alert("âŒ " + data.message);
        }
      } catch (err) {
        alert("âŒ Server connection failed");
        console.error(err);
      } finally {
        btn.disabled = false;
        btn.textContent = "Submit";
      }
    });
  </script>
</body>
</html>
