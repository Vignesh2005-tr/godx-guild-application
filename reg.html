<script>
    document.getElementById('applicationForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        const formData = new FormData(this);
        const data = {
            name: formData.get('name'),
            discordId: formData.get('discordId'),
            age: formData.get('age'),
            experience: formData.get('experience'),
            role: formData.getAll('role'), 
            device: formData.getAll('device')
        };

        try {
            // Updated to your Railway URL
            const response = await fetch('https://godx-guild-application-production.up.railway.app/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            if (response.ok) {
                alert('Application submitted successfully!');
                window.location.href = 'gr.html';
            } else {
                alert('Submission failed. Check your backend logs.');
            }
        } catch (error) {
            console.error('Connection Error:', error);
            alert('Server connection failed. Make sure your Railway app is active.');
        }
    });
</script>
