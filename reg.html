// Replace your script block at the bottom of reg.html with this:
<script>
  const form = document.getElementById("GuildFORM");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const fd = new FormData(form);
    const btn = form.querySelector("button[type=submit]");
    btn.disabled = true;
    btn.textContent = "Submitting...";

    try {
      // Use your ACTUAL Railway production link
      const res = await fetch("https://godx-guild-application-production.up.railway.app/apply", { 
        method: "POST", 
        body: fd 
      });
      
      const data = await res.json();

      if (data.success) {
        alert("✅ Application Submitted Successfully!");
        window.location.href = "gr.html";
      } else {
        alert("❌ Submission failed: " + (data.message || "Unknown error"));
      }
    } catch (err) {
      console.error(err);
      alert("❌ Server connection failed. Check if Railway is Online.");
    } finally {
      btn.disabled = false;
      btn.textContent = "Submit";
    }
  });
</script>
