<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>GODX Guild Apply</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body style="text-align:center;">
  <h1>ğ—šğ—¨ğ—œğ—Ÿğ—— ğ—¥ğ—˜ğ—¤ğ—¨ğ—œğ—¥ğ—˜ğ— ğ—˜ğ—¡ğ—§ â€“ ğ—šğ—¢ğ——X ğ—˜ğ—¦ğ—£ğ—¢ğ—¥ğ—§ğ—¦</h1>

  <form id="GuildFORM" enctype="multipart/form-data">
    <table border="1" style="margin:auto;">
      <tr><td>NAME</td><td><input type="text" name="name" required></td></tr>

      <tr><td>DISCORD USER ID</td>
        <td><input type="text" name="discordId" required></td></tr>

      <tr><td>AGE</td>
        <td><input type="number" name="age" required></td></tr>

      <tr><td>EXPERIENCE</td>
        <td><input type="text" name="experience"></td></tr>

      <tr><td>ROLE</td><td>
        <label><input type="checkbox" name="roles" value="Rusher"> Rusher</label><br>
        <label><input type="checkbox" name="roles" value="Sniper"> Sniper</label><br>
        <label><input type="checkbox" name="roles" value="All Rounder"> All Rounder</label>
      </td></tr>

      <tr><td>DEVICE</td><td>
        <label><input type="checkbox" name="devices" value="Mobile"> Mobile</label><br>
        <label><input type="checkbox" name="devices" value="PC"> PC</label>
      </td></tr>

      <tr><td>PROFILE IMAGE</td>
        <td><input type="file" name="discord_pic"></td></tr>
    </table>

    <br>
    <button type="submit">SUBMIT</button>
  </form>

  <script>
    const form = document.getElementById("GuildFORM");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const fd = new FormData(form);

      try {
        const res = await fetch("/apply", {
          method: "POST",
          body: fd
        });

        const data = await res.json();

        if (data.success) {
          alert("âœ… Application Submitted!");
          form.reset();
        } else {
          alert("âŒ " + data.message);
        }
      } catch (err) {
        alert("âŒ Server connection failed");
        console.error(err);
      }
    });
  </script>
</body>
</html>
